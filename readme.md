# 最終的にやること
~~FXの買い，売りのタイミング，価格をリアルタイムで提案する．~~
過去のFXデータを使って仮想取引させて，元金を有意に増やす，またその際のリスクを統計的に推定する

# 目標達成のためにやらなければいけないこと
- マーケットデータのリアルタイム取得

	→MT4 or MT5で取得&自動取引ができるらしいが，言語を新たに覚えるのは面倒なためとりあえず過去データをpythonに読み込んでアルゴリズムを検証する．
- 実装
	- [x] ３種の適当な指標を調べる
	    - 移動平均線
	    - ボリンジャーバンド
	    - 一目均衡表
	- [x] 指標をプログラムで再現する
	- [ ] 売買ルールを付加してシミュレーションする
	- [ ] 売買ルールパラメータを変更してシミュレーションやりまくる．
- 検証方法
	- 元金よりも優位に何%増えるか
	- 元金割れを起こすリスクは何%か
- 時間があったら
	- 他の指標や，機械学習などを試してみる．

# 留意事項
- とりあえず実装してみることを重要視する．
- 結果の理論的説明をつけられるようにする．

# 前提
- 何分，何時間，何日おきにトレードを行うのか
	- 統計的に結果を出すため，データ取得期間/トレード間隔 > 50 とする．それ以下は変数にする
- ~~どの証券会社を使うか~~
- どの為替ペアを使うか
	- USD/JPY
- 元金を何円にするか
	- 100万．レバレッジは変数とする．
- シミュレーションに入れること，入れないこと
	- 入れること
		- スプレッド
		- 強制ロスカット
	- 入れないこと
		- スワップ金利
		- 約定の遅れ

# 実装環境
言語：　python3.10

# memo
使用ライブラリ
Backtesting
https://yuyasugano.medium.com/backtesting-py%E3%82%92%E3%81%AF%E3%81%98%E3%82%81%E3%81%8B%E3%82%89-backtesting-0-1-7-7b7aa2c662df

#　評価方法
まず各戦略の最も良い結果を出すパラメータを探す．これは，最終資産を最大化するようにパラメータ最適化を行う．次にその戦略が有意に利益を生んでいるかどうかをウィルコクソンの順位和検定で有意水準5%の検定を取ることで確かめる．検定する数値は1つ1つの取引の損益率とする．資産が増加している戦略において，ウィルコクソン検定が5%以下であれば運用損益平均がゼロではないと統計的にいうことができる．

#　シミュレーション条件
2013年～2021年のUSDJPY30分足データでバックテスト
スプレッドは0.2%(楽天FXを参考)
レバレッジは1倍
元本は1000単位
# 結果
## SMA

## BBand
### 順張り
1~30daySMA　の　BBand 最適パラメータn=694　リターン-15% 　P値8.87e-06 有意に損益
30~30x6daySMA の　BBand　最適パラメータn=1330 リターン6.7% P値0.0519 帰無仮説採択によって有意に利益は発生していると言い難い．

## Ichimoku

## k-means